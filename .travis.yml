language: java

# safelist
branches:
  only:
  - master

jdk: oraclejdk8

addons:
  apt:
    packages:
      - oracle-java8-installer

before_install:
 - wget http://files.minecraftforge.net/maven/net/minecraftforge/forge/1.14.4-28.1.0/forge-1.14.4-28.1.0-mdk.zip
 - unzip -n forge-1.14.4-28.1.0-mdk.zip
 - rm forge-1.14.4-28.1.0-mdk.zip
install: ./gradlew setupCiWorkspace
script: ./gradlew build

before_cache:
  - rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
  - rm -fr $HOME/.gradle/caches/*/plugin-resolution/
cache:
  directories:
    - $HOME/.gradle/caches/
    - $HOME/.gradle/wrapper/
